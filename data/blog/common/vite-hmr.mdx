---
title: 'ç”±ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜å¼•å‘çš„æ€è€ƒï¼šVite çš„ HMR æ˜¯æ€ä¹ˆåšçš„ï¼ŸğŸ¤”'
date: '2022-10-24'
tags: ['React', 'JavaScript', 'Vite', 'æŠ€æœ¯æ–‡ç« ']
draft: false
summary: 'HMR æ˜¯æå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨ï¼Œä½†æ˜¯æœ‰ä¸¤æ®µå‡ ä¹ç›¸åŒçš„ä»£ç  HMR ç«Ÿç„¶æœ‰ä¸€ä¸ªä¸ç”Ÿæ•ˆï¼Ÿä»”ç»†ç ”ç©¶ Vite æºç åå‘ç°åŸæ¥æ˜¯ä¸éµå®ˆè§„èŒƒæƒ¹çš„ç¥¸......'
---

ğŸ’¡ æœ¬æ–‡åˆ†æåŸºäº `Vite` v3.1.8 ç‰ˆæœ¬ï¼Œä¸åŒçš„ç‰ˆæœ¬å¯èƒ½ä¼šå­˜åœ¨å·®å¼‚

## å‰è¨€

`HMR` çš„å…¨ç§°æ˜¯ Hot Module Replacementï¼Œåœ¨æ²¡æœ‰ `HMR` ä¹‹å‰æˆ‘ä»¬æ”¹åŠ¨ä¸€è¡Œä»£ç éƒ½éœ€è¦å…¨å±€åˆ·æ–°ï¼Œç®€å•çš„é¡µé¢è¿˜å¥½ï¼Œä¸€æ—¦é‡åˆ°å¤æ‚çš„é¡µé¢ï¼Œé‡Œé¢ä¼´éšç€å¤æ‚çš„ç½‘ç»œè¯·æ±‚ï¼Œæ›´éš¾å—çš„æ˜¯å¦‚æœä½ è¦è°ƒè¯•çš„ UI éœ€è¦åœ¨é¡µé¢ä¸Šè¿›è¡Œäº¤äº’ä¹‹åæ‰ä¼šå‡ºç°ã€‚è¿™å°±å¯¼è‡´ä½ æ¯æ¬¡æ”¹åŠ¨ä»£ç å¿…ç„¶è¦åˆ·æ–°é¡µé¢ï¼Œç„¶åè¿›è¡Œè‡³å°‘ä¸€æ¬¡é¡µé¢äº¤äº’æ‰èƒ½çœ‹åˆ°è‡ªå·±æ”¹åŠ¨çš„æ•ˆæœã€‚

`HMR` çš„æ„ä¹‰å°±åœ¨äºï¼Œä¸åˆ·æ–°é¡µé¢çš„å‰æä¸‹æŒ‰éœ€æ¸²æŸ“å‘ç”Ÿæ”¹åŠ¨çš„ç»„ä»¶ï¼Œè¿™å°±èƒ½æå¤§åœ°æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆæœï¼Œæ‰€ä»¥è¿™ä¸ªåŠŸèƒ½åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­éå¸¸å¹¿æ³›ã€‚

è¯è¯´å›æ¥ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦äº†è§£ HMR åŸç†å‘¢ï¼Œç”¨ç€æ²¡æ¯›ç—…ä¸å°±å¥½äº†å˜›ï¼Œé—®é¢˜å°±å‡ºåœ¨æœ‰æ¯›ç—…çš„æ—¶å€™ ğŸ¤£ã€‚å¤§å®¶å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š

- `ButtonDemoList1.jsx`

  ```jsx
  // ButtonDemoList1.jsx
  export const ButtonDemoList1 = () => {
    return [
      {
        render: () => {
          return <div>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æŒ‰é’®11</div>
        },
      },
    ]
  }
  ```

- `buttonDemoList2.jsx`

  ```jsx
  // buttonDemoList2.jsx
  export const buttonDemoList2 = () => {
    return [
      {
        render: () => {
          return <div>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æŒ‰é’®22</div>
        },
      },
    ]
  }
  ```

- `App.jsx`

  ```jsx
  // App.jsx
  import { ButtonDemoList1 } from './components/ButtonDemoList1'
  import { buttonDemoList2 } from './components/buttonDemoList2'
  const ButtonWrapper = (props) => {
    const { comp = [] } = props
    return comp.map((c) => c.render())
  }
  function App() {
    return (
      <div className="App">
        <ButtonWrapper comp={ButtonDemoList1()} />
        <ButtonWrapper comp={buttonDemoList2()} />
      </div>
    )
  }
  ```

ä¸Šè¿°ä¸‰éƒ¨åˆ†ä»£ç åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ”¹åŠ¨ `ButtonDemoList1.jsx` æˆ–è€… `buttonDemoList2.jsx` åé¡¹ç›®èƒ½å¤Ÿæ­£å¸¸çƒ­æ›´æ–°ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤â€¦ ğŸ¤ª

![Untitled.gif](http://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/376bcca0b1ac4821930f523ec0e364a9~tplv-k3u1fbpfcp-watermark.image?)

é€šè¿‡å½•å±å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘æ”¹åŠ¨ `ButtonDemoList1` çš„æ—¶å€™é¡¹ç›®ä¸èƒ½æ­£å¸¸çƒ­æ›´æ–°ï¼Œä½†æ˜¯æ”¹åŠ¨ `buttonDemoList2` çš„æ—¶å€™é¡¹ç›®å´å¯ä»¥çƒ­æ›´æ–°ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶çš„ä»£ç æ•´ä½“æ¥è¯´éå¸¸ç›¸ä¼¼ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šå¯¼è‡´æœ‰è¿™æ ·çš„å·®å¼‚å‘¢ï¼Ÿ

è¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« éœ€è¦è§£ç­”çš„é—®é¢˜ã€‚

## Vite æ˜¯æ€ä¹ˆå®ç°çƒ­æ›´æ–°çš„

### æ€»è§ˆ

æ ¹æ® Vite æºç æ•´ç†å‡ºäº†ä¸€ä¸ªå¤§è‡´æµç¨‹ï¼Œæ€»ä½“å°±æ˜¯ Vite Server ç›‘å¬åˆ°æ–‡ä»¶å˜åŒ–ï¼Œé€šè¿‡ `WebSocket` å‘ Vite Client å‘é€é€šçŸ¥ï¼ŒClient æ ¹æ®é€šçŸ¥å†…å®¹è§£æï¼Œå‘èµ· HTTP è¯·æ±‚è·å–æ›´æ–°åçš„æ–‡ä»¶ï¼Œæœ€åå±€éƒ¨æ›´æ–°é¡µé¢ã€‚

![](/static/images/vite-hmr/image1.png)

è¯è¯´å›æ¥ï¼ŒVite Server å’Œ Vite Client æ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸‹ Vite ä»£ç çš„ç›®å½•ç»“æ„ï¼š

```jsx
src
â”œâ”€â”€ client
â”‚   â””â”€â”€ ...
â””â”€â”€ node
    â””â”€â”€ ...
```

æ€»ä½“åˆ†ä¸º client å’Œ node ä¸¤ä¸ªç›®å½•ç»“æ„ï¼Œå¼€å‘æ—¶æˆ‘ä»¬æ˜¯é€šè¿‡ `vite dev` å¯åŠ¨é¡¹ç›®çš„ï¼Œè¿™é‡Œå…¶å®å°±æ˜¯å¯åŠ¨äº†ä¸€ä¸ª node æœåŠ¡ï¼Œå…¶ä¸ HMR ç›¸å…³çš„åŠŸèƒ½ä¸»è¦æœ‰ä¸¤ä¸ªï¼š

1. ç›‘å¬é¡¹ç›®æ–‡ä»¶å˜åŒ–
2. å¯åŠ¨ WebSocket æœåŠ¡ï¼Œå‘å®¢æˆ·ç«¯ä¸»åŠ¨æ¨é€æ¶ˆæ¯

å¦å¤–ä¸€ä¸ªå°±æ˜¯ Vite Clientï¼Œæ¯”å¦‚é¡¹ç›®ä¸­æœ‰å…¥å£ `index.html` æ–‡ä»¶ï¼Œåœ¨å®é™…è¯·æ±‚æ—¶è¿”å›çš„ html å†…å®¹ä¸å®é™…åœ¨é¡¹ç›®ä¸­å†™çš„å¹¶ä¸ç›¸åŒï¼š

```html
<script type="module" src="/@vite/client"></script>
```

Vite é€šè¿‡è¿™ç§æ–¹å¼å‘æˆ‘ä»¬çš„ä»£ç ä¸­æ³¨å…¥ Vite Clientï¼Œå…¶ä¸ HMR ç›¸å…³çš„åŠŸèƒ½ä¸»è¦æœ‰ä¸¤ä¸ªï¼š

1. ç›‘å¬ `WebSocket` æ¶ˆæ¯ï¼Œè§£æåå‘èµ·æ–‡ä»¶è¯·æ±‚
2. æ‰§è¡Œ `import.meta.hot` ä¸­å®šä¹‰çš„é’©å­å‡½æ•°

### Server æ€ä¹ˆçŸ¥é“åº”è¯¥å‘ Client å‘é€å“ªä¸ªæ–‡ä»¶å‘¢ï¼Ÿ

æˆ‘ä»¬å…ˆæ¥è§‚å¯Ÿè¿™ä¸¤æ®µä»£ç 

```jsx
// a.jsx
import { random } from '../utils/b'
export function ContextButton() {
  return <button id="context-button">{random()}</button>
}
```

```jsx
// b.js
export const random = () => {
  return Math.random() + 1223
}
```

æ”¹åŠ¨ä¸Šé¢ä¸¤ä¸ªä»£ç éƒ½æ˜¯å¯ä»¥è§¦å‘çƒ­æ›´æ–°çš„ï¼Œä¸Šé¢è®²åˆ° Vite æ˜¯é€šè¿‡ WebSocket å‘é€æ¶ˆæ¯ç»™ Client è¡¨æ˜åº”è¯¥æ›´æ–°å“ªäº›æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹æ”¹åŠ¨è¿™ä¸¤æ®µä»£ç å‘é€çš„æ¶ˆæ¯åˆ†åˆ«æ˜¯ä»€ä¹ˆã€‚

- æ”¹åŠ¨ `a.js`x

  ```json
  {
    "type": "update",
    "updates": [
      {
        "type": "js-update",
        "timestamp": 1666362566132,
        "path": "/context/a.jsx",
        "explicitImportRequired": false,
        "acceptedPath": "/context/a.jsx"
      }
    ]
  }
  ```

- æ”¹åŠ¨ `b.js`

  ```json
  {
    "type": "update",
    "updates": [
      {
        "type": "js-update",
        "timestamp": 1666362526781,
        "path": "/context/a.jsx",
        "explicitImportRequired": false,
        "acceptedPath": "/context/a.jsx"
      }
    ]
  }
  ```

å…¶å®èƒ½å¤Ÿè§‚å¯Ÿåˆ°é™¤äº† timestamp ä¹‹å¤–ï¼Œæ”¹åŠ¨ `a.jsx` å’Œ `b.js` å‘é€ WebSocket æ¶ˆæ¯å…¶å®æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œå¹¶ä¸æ˜¯æ”¹åŠ¨å“ªä¸ªæ–‡ä»¶å°±å‘ Client å‘é€å“ªä¸ªæ–‡ä»¶ã€‚é‚£ä¹ˆ Vite æ˜¯æ ¹æ®ä»€ä¹ˆæ¥åˆ¤å®šçš„å‘¢ï¼Ÿ

è¿™é‡Œæ¶‰åŠåˆ°ã€Œæ¨¡å—è¾¹ç•Œã€çš„å®šä¹‰ï¼Œ[Vite æ–‡æ¡£](https://cn.vitejs.dev/guide/api-hmr.html)ä¸­æ˜¯è¿™æ ·è§£é‡Šçš„ï¼š

> â€œæ¥å—â€ çƒ­æ›´æ–°çš„æ¨¡å—è¢«è®¤ä¸ºæ˜¯ Â **HMR è¾¹ç•Œï¼›ä»è¾¹ç•Œæ¨¡å—å‘ä¸Šçš„å¯¼å…¥è€…å°†ä¸ä¼šæ”¶åˆ°æ›´æ–°ã€‚**

æŒ‰ç…§è¿™ä¸ªå®šä¹‰æˆ‘ä»¬å†çœ‹ä¸‹æµè§ˆå™¨è·å–åˆ°çš„ `a.jsx` å’Œ `b.js`ï¼Œä»£ç ç•¥å¤šï¼Œè¿™é‡Œå°±ç”¨å›¾ç‰‡ä»£æ›¿

`a.jsx`
![Untitled.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75fa83fe28644b29abd740c35f4f79bd~tplv-k3u1fbpfcp-watermark.image?)

`b.js`
![Untitled 1.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b47e18622104a3496180a20120cadce~tplv-k3u1fbpfcp-watermark.image?)

å¯ä»¥çœ‹åˆ° `a.jsx` ä¸­æ³¨å†Œäº† `import.meta.hot.accept` äº‹ä»¶ï¼Œ`b.js` å´æ²¡æœ‰ï¼Œå› ä¸º a å¼•ç”¨äº† bï¼Œåœ¨ b æ²¡æœ‰ `accept` çš„æƒ…å†µä¸‹ï¼ŒVite å°±ä¼šå‘ä¸ŠæŸ¥æ‰¾ï¼Œa å®šä¹‰äº† `accept`ï¼Œæ‰€ä»¥æ”¹åŠ¨ a æˆ–è€… b ä¹‹å Client æ¥æ”¶åˆ°çš„éœ€è¦çƒ­æ›´æ–°çš„æ–‡ä»¶éƒ½æ˜¯ `a.jsx`ã€‚

ç°åœ¨é—®é¢˜å°±åœ¨äºä¸ºä»€ä¹ˆ `a.jsx` æœ‰ `import.meta.hot.accept`ï¼Œ`b.js` å´æ²¡æœ‰ã€‚

### import.meta.hot.accept

> è¦æ¥æ”¶æ¨¡å—è‡ªèº«ï¼Œåº”ä½¿ç”¨ Â `import.meta.hot.accept`ï¼Œå‚æ•°ä¸ºæ¥æ”¶å·²æ›´æ–°æ¨¡å—çš„å›è°ƒå‡½æ•°

```jsx
if (import.meta.hot) {
  import.meta.hot.accept((newModule) => {
    if (newModule) { ... }
  })
}
```

Vite é¡¹ç›®ä¸­ React çš„ HMR æ˜¯ `@vitejs/plugin-react` æ’ä»¶æ¥åšçš„ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒå»æ‰ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ

```diff
const config: UserConfig = {
  mode: 'development',
- plugins: [react()],
  build: {
    // to make tests faster
    minify: false
  }
}
```

é‡æ–°å¯åŠ¨é¡¹ç›®ä¹‹åé¡¹ç›®ä»ç„¶èƒ½æ­£å¸¸å±•ç¤ºï¼Œä½†æ˜¯ HMR åŠŸèƒ½å¤±æ•ˆäº†ï¼Œæ”¹åŠ¨ä»£ç åå¿…é¡»é€šè¿‡å…¨å±€åˆ·æ–°ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

![Untitled 1.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbd92fbb3f6b41de8aeb7a305b90bf7e~tplv-k3u1fbpfcp-watermark.image?)

å¯ä»¥çœ‹åˆ°åœ¨ä¿®æ”¹ä»£ç ä¹‹åï¼Œå³ä¾§æµè§ˆå™¨ä¸­çš„ **count is: 8** å˜æˆäº† **count is: 0**ï¼Œè¿™è¯´æ˜é¡µé¢é‡æ–°åˆ·æ–°ï¼Œæ²¡æœ‰ä¿ç•™ä¹‹å‰çš„çŠ¶æ€ã€‚å®é™…è¯·æ±‚æ–‡ä»¶å‘ç°ï¼Œè¯·æ±‚åˆ°çš„ jsx ä»£ç ä¸­å‡ä¸åŒ…å« `import.hot.accept` é€»è¾‘ï¼Œæ‰€ä»¥ Vite å¹¶ä¸çŸ¥é“å¦‚ä½•è¿›è¡Œçƒ­æ›´æ–°ï¼Œåªèƒ½å…¨å±€åˆ·æ–°é¡µé¢ã€‚

æ—¢ç„¶è¿™æ ·æˆ‘ä»¬åˆå›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆ `@vitejs/plugin-react` åªç»™ `a.jsx` åŠ  `import.meta.hot.accept`ï¼Œ`b.js` å´æ²¡æœ‰ï¼Ÿ

åœ¨ `@vitejs/plugin-react` ä¸­æœ‰è¿™ä¹ˆä¸€æ®µæºä»£ç å¯ä»¥è¯´æ˜è¿™ä¸ªé—®é¢˜

```jsx
if (!skipFastRefresh && !ssr && !isNodeModules) {
  // Modules with .js or .ts extension must import React.
  const isReactModule = isJSX || importReactRE.test(code)
  if (isReactModule && filter(id)) {
    useFastRefresh = true
    plugins.push([await loadPlugin('react-refresh/babel'), { skipEnvCheck: true }])
  }
}
```

åªæœ‰å½“æ–‡ä»¶åç§°ä¸º `.jsx` æˆ–è€… `.tsx`ï¼Œæˆ–è€…ä»£ç ä¸­å«æœ‰ `import React from 'react'` æ—¶ï¼Œæ‰ä¼šåœ¨è½¬æ¢ä»£ç æ—¶ä½¿ç”¨ `react-refresh/babel` æ’ä»¶ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `b.js` æ²¡æœ‰æ³¨å…¥å¯¹åº”ä»£ç ï¼Œå› ä¸ºå®ƒæ—¢ä¸æ˜¯ jsx æ–‡ä»¶ï¼Œä¹Ÿä¸åŒ…å« React ä»£ç çš„æ³¨å…¥ã€‚

### æµè§ˆå™¨ç«¯æ‰§è¡Œçƒ­æ›´æ–°é€»è¾‘

è¿™ä¸ªæ­¥éª¤ä¹Ÿå°±æ˜¯ä¸Šè¿°æ—¶åºå›¾ä¸­æ‰§è¡Œ `import.meta.hot.accept` é€»è¾‘ï¼Œè¿™éƒ¨åˆ†ä»£ç ç”± `react-refresh.babel` è´Ÿè´£æ³¨å…¥ï¼Œä»£ç å…¥ä¸‹ï¼š

```jsx
import.meta.hot.accept((mod) => {
  if (isReactRefreshBoundary(mod)) {
    if (!window.__vite_plugin_react_timeout) {
      window.__vite_plugin_react_timeout = setTimeout(() => {
        window.__vite_plugin_react_timeout = 0
        RefreshRuntime.performReactRefresh()
      }, 30)
    }
  } else {
    import.meta.hot.invalidate()
  }
})
```

## æ‰€ä»¥åˆ°åº•å‘ç”Ÿäº†å•¥ï¼Ÿ

è¿˜æ˜¯å›åˆ°å‰è¨€ä¸­æåˆ°çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆåŒæ ·çš„ä»£ç ï¼Œä»…ä»…æ˜¯å‡½æ•°åç§°ä¸åŒï¼Œå´å¯¼è‡´ HMR ä¸ç”Ÿæ•ˆå‘¢ï¼Ÿ

> åªæœ‰å½“æ–‡ä»¶åç§°ä¸º `.jsx` æˆ–è€… `.tsx`ï¼Œæˆ–è€…ä»£ç ä¸­å«æœ‰ `import React from 'react'` æ—¶ï¼Œæ‰ä¼šåœ¨è½¬æ¢ä»£ç æ—¶ä½¿ç”¨ `react-refresh/babel` æ’ä»¶

ä¸Šé¢æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬çš„æ–‡ä»¶åç§° `ButtonDemoList1.jsx` å’Œ `buttonDemoList2.jsx` å’Œæ˜æ˜¾æ˜¯ç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„ï¼Œé‚£ä¹ˆé—®é¢˜å¯èƒ½å°±å‡ºåœ¨ `react-refresh/babel` æ’ä»¶é‡Œäº†ã€‚

åœ¨é˜…è¯»ä»£ç ä¹‹åå‘ç°ä»£ç é‡Œæœ‰è¿™ä¹ˆä¸€æ®µé€»è¾‘ï¼š

```jsx
function isComponentishName(name) {
  return typeof name === 'string' && name[0] >= 'A' && name[0] <= 'Z'
}
```

å¯¹äºå‡½æ•°å£°æ˜ï¼Œ`react-refresh/babel` æ˜¯ä½¿ç”¨ `isComponentishName` æ¥åˆ¤æ–­è¯¥å‡½æ•°æ˜¯ä¸æ˜¯ React ç»„ä»¶çš„ï¼Œé—®é¢˜å°±å‡ºåœ¨æˆ‘ä»¬çš„ç»„ä»¶å†™æ³•ä¸Šï¼š

```jsx
import React from 'react'

export const buttonDemoList2 = () => {
  return [
    {
      render: () => {
        return <div>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æŒ‰é’®2222æ”¹åŠ¨33</div>
      },
    },
  ]
}
```

```jsx
import React from 'react'

export const ButtonDemoList1 = () => {
  return [
    {
      render: () => {
        return <div>æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æŒ‰é’®1111æ”¹åŠ¨1122</div>
      },
    },
  ]
}
```

ä¸¥æ ¼æ¥è¯´ `ButtonDemoList1` å¹¶ä¸ç®—æ˜¯ä¸€ä¸ª react å‡½æ•°å¼ç»„ä»¶ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸€é¡¹çš„ render æ‰æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸åº”è¯¥å°†å…¶å‘½åä¸ºå¤§é©¼å³°ï¼Œå°†å…¶æ”¹æˆ `buttonDemoList1` ä¹‹åå³å¯è§£å†³é—®é¢˜ã€‚

![Untitled 2.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61562010232a40bfb0ac06519c8587a1~tplv-k3u1fbpfcp-watermark.image?)

## æ€»ç»“

å…¶å®è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸæœ¬è¿˜æ˜¯å†™ä»£ç æ²¡æœ‰éµå¾ª React è§„èŒƒï¼Œåœ¨ [React å®˜æ–¹æ–‡æ¡£](https://reactjs.org/docs/jsx-in-depth.html#user-defined-components-must-be-capitalized)ä¸­æœ‰å¯¹åº”è¯´æ˜ï¼Œæ‰€ä»¥å¤§å®¶åœ¨å†™ä»£ç çš„æ—¶å€™è¿˜æ˜¯è¦éµå¾ªè§„èŒƒ

![Untitled 2.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07e94eddd0d348e9a1f97e48bb4029ba~tplv-k3u1fbpfcp-watermark.image?)

## ç›¸å…³èµ„æ–™

- æ–‡ä¸­ä½œä¸ºç¤ºä¾‹è®²è§£çš„ HMR Demo æ‰˜ç®¡åœ¨ Githubï¼Œä»“åº“åœ°å€ï¼šhttps://github.com/jacob-lcs/hmr-demo
- [Vite å®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/guide/api-hmr.html)
- [Vite HMR è¿‡ç¨‹æ¦‚è¿°](https://juejin.cn/post/7096103959563075597)
